<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–ª–∏–∫–µ—Ä –ú–æ–Ω–µ—Ç</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      min-height: 100vh;
      background: linear-gradient(to top right, #222, #444);
      color: #fff;
      text-align: center;
    }
    h1 { margin-bottom: 5px; }
    p { margin-top: 0; opacity: 0.7; }

    .coin {
      width: 180px;
      height: 180px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffd700, #b8860b);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 80px;
      cursor: pointer;
      transition: transform 0.1s;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.7);
      margin: 20px 0;
    }
    .coin:active {
      transform: scale(0.9) rotate(-5deg);
    }

    .progress-bar {
      width: 80%;
      height: 20px;
      background: rgba(255,255,255,0.2);
      border-radius: 10px;
      overflow: hidden;
      margin: 10px auto;
    }
    .progress {
      height: 100%;
      background: #32cd32;
      width: 0%;
    }

    button {
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      background: #32cd32;
      color: white;
      transition: background 0.2s;
    }
    button:hover {
      background: #28a428;
    }

    ul { list-style: none; padding: 0; }
    li { margin: 3px 0; }
  </style>
</head>
<body>
  <h1>–ö–ª–∏–∫–µ—Ä –ú–æ–Ω–µ—Ç ü™ô</h1>
  <p>–ù–∞–∫–æ–ø–∏ –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ!</p>

  <div class="coin" id="coin">ü™ô</div>

  <div class="progress-bar">
    <div class="progress" id="progress"></div>
  </div>
  <p id="stageName">–ë—Ä–æ–Ω–∑–æ–≤–∞—è –º–æ–Ω–µ—Ç–∞ ‚Äî 0/20</p>

  <p><b>–°—á—ë—Ç:</b> <span id="score">0</span></p>
  <p><b>–†–µ–∫–æ—Ä–¥:</b> <span id="highscore">0</span></p>

  <div>
    <button onclick="resetGame()">–°–±—Ä–æ—Å</button>
  </div>

  <h3>–õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–æ–ø-10</h3>
  <ul id="leaderboard"></ul>

  <script>
    const stages = [
      { name: "–ë—Ä–æ–Ω–∑–æ–≤–∞—è –º–æ–Ω–µ—Ç–∞", clicks: 20, icon: "üü§" },
      { name: "–°–µ—Ä–µ–±—Ä—è–Ω–∞—è –º–æ–Ω–µ—Ç–∞", clicks: 50, icon: "‚ö™" },
      { name: "–ó–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞", clicks: 100, icon: "üü°" },
      { name: "–ü–ª–∞—Ç–∏–Ω–æ–≤–∞—è –º–æ–Ω–µ—Ç–∞", clicks: 200, icon: "üîµ" },
      { name: "–ê–ª–º–∞–∑–Ω–∞—è –º–æ–Ω–µ—Ç–∞", clicks: 500, icon: "üíé" }
    ];

    let score = 0;
    let highscore = Number(localStorage.getItem("coin_highscore") || 0);
    let stageIndex = 0;
    let progress = 0;
    let leaderboard = JSON.parse(localStorage.getItem("coin_leaderboard") || "[]");

    const coin = document.getElementById("coin");
    const scoreEl = document.getElementById("score");
    const highscoreEl = document.getElementById("highscore");
    const progressEl = document.getElementById("progress");
    const stageNameEl = document.getElementById("stageName");
    const leaderboardEl = document.getElementById("leaderboard");

    highscoreEl.textContent = highscore;
    renderLeaderboard();

    coin.addEventListener("click", () => {
      score++;
      scoreEl.textContent = score;
      progress++;
      if (progress >= stages[stageIndex].clicks) {
        stageIndex = Math.min(stageIndex + 1, stages.length - 1);
        progress = 0;
      }
      updateUI();

      if (score > highscore) {
        highscore = score;
        localStorage.setItem("coin_highscore", highscore);
        highscoreEl.textContent = highscore;
        saveLeaderboard();
      }
      if (navigator.vibrate) navigator.vibrate(20);
    });

    function updateUI() {
      const stage = stages[stageIndex];
      stageNameEl.textContent = `${stage.name} ‚Äî ${progress}/${stage.clicks}`;
      progressEl.style.width = (progress / stage.clicks) * 100 + "%";
      coin.textContent = stage.icon;
    }

    function resetGame() {
      score = 0;
      stageIndex = 0;
      progress = 0;
      updateUI();
      scoreEl.textContent = score;
    }

    function saveLeaderboard() {
      leaderboard.push({ name: "–ì–æ—Å—Ç—å", score });
      leaderboard.sort((a, b) => b.score - a.score);
      leaderboard = leaderboard.slice(0, 10);
      localStorage.setItem("coin_leaderboard", JSON.stringify(leaderboard));
      renderLeaderboard();
    }

    function renderLeaderboard() {
      leaderboardEl.innerHTML = "";
      if (leaderboard.length === 0) {
        leaderboardEl.innerHTML = "<li>–ï—â—ë –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</li>";
        return;
      }
      leaderboard.forEach((row, i) => {
        const li = document.createElement("li");
        li.textContent = `${i+1}. ${row.name} ‚Äî ${row.score}`;
        leaderboardEl.appendChild(li);
      });
    }

    updateUI();
  </script>
</body>
</html>
